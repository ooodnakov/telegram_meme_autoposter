{% extends "base.html" %}
{% block content %}
{% set key = request.query_params.get('key') %}
{% set query_suffix = '?page=' ~ page ~ ('&key=' ~ key if key else '') %}
{% set key_only_query = '?key=' ~ key if key else '' %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="m-0">Batch</h1>
    <a class="btn btn-sm btn-outline-secondary" href="/batch{{ query_suffix }}">Refresh</a>
</div>
{% if posts %}
<form
    method="post"
    action="/batch/send{{ key_only_query }}"
    onsubmit="return confirm('Send whole batch?');"
>
    <input type="hidden" name="key" value="{{ key }}" />
    <button class="btn btn-primary btn-lg w-100 mb-3" type="submit">
        Send Batch
    </button>
</form>
{% endif %}
<div id="batch-grid">
    {% set origin = "batch" %}
    {% set alt_text = "batch item" %}
    {% set empty_message = "Batch is empty." %}
    {% include "_batch_grid.html" %}
</div>
{% endblock %}
