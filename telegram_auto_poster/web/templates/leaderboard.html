{% extends "base.html" %}
{% macro render_table(title, items, columns) %}
<h2>{{ title }}</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>{{ _('Source') }}</th>
      {% for field, label in columns %}
      <th>{{ label }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
  {% for item in items %}
    <tr>
      <td>{{ item.source }}</td>
      {% for field, label in columns %}
      <td>
        {{ item[field] }}
        {% if field != 'submissions' %}
        ({{ '%.1f'|format(item[field ~ '_pct']) }}%)
        {% endif %}
      </td>
      {% endfor %}
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endmacro %}
{% block content %}
<h1>{{ _('Leaderboard') }}</h1>
{{ render_table(_('Most Submissions'), submissions, [('submissions', _('Submissions')), ('approved', _('Approved')), ('rejected', _('Rejected'))]) }}
{{ render_table(_('Most Approved'), approved, [('approved', _('Approved')), ('submissions', _('Submissions')), ('rejected', _('Rejected'))]) }}
{{ render_table(_('Most Rejected'), rejected, [('rejected', _('Rejected')), ('submissions', _('Submissions')), ('approved', _('Approved'))]) }}
{% endblock %}
